<!DOCTYPE html>
<html lang="es" class="h-100" data-bs-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calculadora Inteligente (IA) — Paola Ortiz</title>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    :root{
      --grad-1: 255, 99, 132;
      --grad-2: 99, 102, 241;
      --glass-bg: 255,255,255;
      --glass-bg-dark: 17,18,23;
    }

    /* ===== Background ===== */
    body{
      min-height:100vh;
      display:flex;
      flex-direction:column;
      font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 1200px at -10% -10%, rgba(var(--grad-2), .12), transparent 60%),
        radial-gradient(1000px 800px at 110% 10%, rgba(var(--grad-1), .10), transparent 60%),
        linear-gradient(135deg, #0ea5e9 0%, #8b5cf6 60%, #ef4444 120%);
      background-attachment: fixed;
    }

    /* ===== Navbar ===== */
    .navbar-glow{
      background: rgba(0,0,0,.35);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,.15);
    }
    .brand-badge{
      display:inline-flex;align-items:center;gap:.5rem;
      padding:.4rem .8rem;border-radius:999px;
      background:rgba(255,255,255,.1);
      color:#fff;font-weight:600;letter-spacing:.2px
    }
    .brand-badge i{font-size:1.15rem}

    /* ===== Glass Card ===== */
    .glass-card{
      position:relative;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(var(--glass-bg), .55);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      border-radius: 22px;
      box-shadow: 0 10px 40px rgba(0,0,0,.25);
      overflow:hidden;
    }
    html[data-bs-theme="dark"] .glass-card{
      background: rgba(var(--glass-bg-dark), .55);
      border-color: rgba(255,255,255,.08);
    }

    /* Animated border */
    .glass-card::before{
      content:"";
      position:absolute; inset:-2px;
      background: conic-gradient(
        from 180deg,
        rgba(var(--grad-1),.9),
        rgba(var(--grad-2),.9),
        rgba(var(--grad-1),.9)
      );
      filter: blur(12px);
      opacity:.35;
      animation: spin 8s linear infinite;
      z-index:0;
    }
    .glass-card > * { position:relative; z-index:1; }
    @keyframes spin { to { transform: rotate(1turn); } }

    /* Headings */
    .hero-title{font-family:'Poppins',sans-serif; font-weight:800; letter-spacing:.3px}
    .hero-sub{opacity:.85}

    /* Textarea */
    .form-control-lg{
      border-radius:16px;
      border:1px solid rgba(0,0,0,.08);
      box-shadow: 0 2px 12px rgba(0,0,0,.06);
    }
    html[data-bs-theme="dark"] .form-control-lg{
      border-color: rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
    }
    .form-control-lg:focus{
      border-color: rgba(var(--grad-2), .7);
      box-shadow: 0 0 0 .25rem rgba(var(--grad-2), .25);
    }

    /* Button */
    .btn-neo{
      border:0;
      border-radius:14px;
      padding:.9rem 1.2rem;
      font-weight:700;
      letter-spacing:.3px;
      box-shadow: 0 12px 30px rgba(99,102,241,.35);
      background: linear-gradient(135deg, rgb(var(--grad-2)) 0%, rgb(var(--grad-1)) 100%);
    }
    .btn-neo .bi{ transition: transform .2s ease }
    .btn-neo:hover .bi{ transform: translateX(3px) }

    /* Alerts neat */
    .alert{
      border:1px solid rgba(0,0,0,.06);
      border-radius:14px;
    }
    html[data-bs-theme="dark"] .alert{
      border-color: rgba(255,255,255,.08);
      background: rgba(255,255,255,.06);
    }

    /* Footer */
    .app-footer{
      margin-top:auto;
      color:#e9ecef;
      background: rgba(0,0,0,.35);
      backdrop-filter: blur(6px);
      border-top:1px solid rgba(255,255,255,.15);
    }

    /* Small helper badge */
    .kbd-tip{
      font-family:'Poppins',sans-serif;
      background: rgba(255,255,255,.55);
      border:1px dashed rgba(0,0,0,.2);
      border-radius:999px;
      padding:.25rem .65rem;
      font-size:.8rem;
    }
    html[data-bs-theme="dark"] .kbd-tip{
      background: rgba(255,255,255,.08);
      border-color: rgba(255,255,255,.2);
      color:#cbd5e1;
    }

    /* Theme toggle */
    .theme-toggle{
      border-radius:999px;
      border:1px solid rgba(255,255,255,.25);
      background:rgba(0,0,0,.25);
      color:#fff;
    }
  </style>
</head>
<body class="d-flex flex-column min-vh-100">

  <!-- NAV -->
  <nav class="navbar navbar-expand-lg navbar-dark navbar-glow py-3">
    <div class="container">
      <a class="navbar-brand fw-bold d-flex align-items-center gap-2" href="#">
        <span class="brand-badge"><i class="bi bi-robot"></i> Calculadora IA</span>
      </a>
      <div class="d-flex gap-2">
        <span class="text-white-50 small d-none d-md-inline">by Paola Ortiz</span>
        <button id="btnTheme" class="btn btn-sm theme-toggle" type="button" title="Cambiar tema" aria-label="Cambiar tema">
          <i class="bi bi-moon-stars"></i>
        </button>
      </div>
    </div>
  </nav>

  <!-- MAIN -->
  <main class="container my-5 my-md-6">
    <div class="row justify-content-center">
      <div class="col-xl-8 col-lg-9">
        <header class="text-center text-white mb-4">
          <h1 class="hero-title display-5">Calculadora Inteligente</h1>
          <p class="hero-sub lead">Escribe cualquier operación aritmética en lenguaje natural.</p>
          <p class="text-white-50 small">
            Ejemplos: <span class="kbd-tip">raíz cuadrada de 81</span> ·
            <span class="kbd-tip">(15 * 4) / 2</span> ·
            <span class="kbd-tip">5^3 + 10</span>
          </p>
        </header>

        <section class="glass-card p-4 p-md-5">
          <div class="mb-3">
            <label for="textoOperacion" class="form-label fs-5 fw-semibold">
              Tu consulta
            </label>
            <textarea id="textoOperacion" class="form-control form-control-lg" rows="3"
              placeholder="Ej: ¿Cuánto es (15 * 4) / 2?"></textarea>
            <div class="d-flex justify-content-between align-items-center mt-2">
              <small class="text-secondary">Consejo: usa <kbd>Ctrl</kbd> + <kbd>Enter</kbd> para enviar</small>
              <span class="badge text-bg-primary-subtle border border-primary-subtle">
                IA · OpenAI · n8n
              </span>
            </div>
          </div>

          <div class="d-grid mt-3">
            <button id="btnCalcular" class="btn btn-neo btn-lg" type="button">
              Realizar
            </button>
          </div>

          <div id="divResultado" class="alert alert-success mt-4 mb-0 d-none" role="alert">
            <h4 class="alert-heading mb-0">
              Resultado: <span id="resultadoTexto" class="fw-bold"></span>
            </h4>
          </div>

          <div id="divError" class="alert alert-danger mt-4 mb-0 d-none" role="alert">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <span id="errorTexto">Hubo un error al procesar la solicitud.</span>
          </div>
        </section>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer class="app-footer text-center py-4">
    <div class="container small">
      <div class="text-white-50">© 2025 — Desarrollado con ♥ por <strong>Paola Ortiz</strong></div>
    </div>
  </footer>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Theme toggle (light/dark) -->
  <script>
    (function(){
      const html = document.documentElement;
      const btn = document.getElementById('btnTheme');
      const saved = localStorage.getItem('theme');
      if(saved){ html.setAttribute('data-bs-theme', saved); }

      btn.addEventListener('click', () => {
        const now = html.getAttribute('data-bs-theme') === 'dark' ? 'light' : 'dark';
        html.setAttribute('data-bs-theme', now);
        localStorage.setItem('theme', now);
        btn.innerHTML = now === 'dark' ? '<i class="bi bi-brightness-high"></i>' : '<i class="bi bi-moon-stars"></i>';
      });
      btn.innerHTML = html.getAttribute('data-bs-theme') === 'dark'
        ? '<i class="bi bi-brightness-high"></i>' : '<i class="bi bi-moon-stars"></i>';
    })();
  </script>

  <!-- Tu lógica de llamado al Webhook (usa el script robusto que ya tienes) -->
  <script src="script.js" charset="utf-8"></script>

  <!-- Helpers para mostrar/ocultar con Bootstrap classes -->
  <script>
    // Pequeña mejora: si en tu script.js cambias display, aquí sincronizamos con clases
    document.addEventListener('resultado-show', e=>{
      const res = document.getElementById('divResultado');
      res.classList.remove('d-none');
    });
    document.addEventListener('resultado-hide', e=>{
      document.getElementById('divResultado').classList.add('d-none');
    });
    document.addEventListener('error-show', e=>{
      document.getElementById('divError').classList.remove('d-none');
    });
    document.addEventListener('error-hide', e=>{
      document.getElementById('divError').classList.add('d-none');
    });
  </script>
</body>
</html>
